
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Docker stack for getting started on IOT on the Raspberry PI">
      
      
      
      
        <link rel="prev" href="../Duckdns/">
      
      
        <link rel="next" href="../EspruinoHub/">
      
      
      <link rel="icon" href="../../stack-24.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.45">
    
    
      
        <title>ESPHome - IOTstack</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../style.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#esphome" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="IOTstack" class="md-header__button md-logo" aria-label="IOTstack" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.063 1.456a1.75 1.75 0 0 1 1.874 0l8.383 5.316a1.75 1.75 0 0 1 0 2.956l-8.383 5.316a1.75 1.75 0 0 1-1.874 0L2.68 9.728a1.75 1.75 0 0 1 0-2.956Zm1.071 1.267a.25.25 0 0 0-.268 0L3.483 8.039a.25.25 0 0 0 0 .422l8.383 5.316a.25.25 0 0 0 .268 0l8.383-5.316a.25.25 0 0 0 0-.422Z"/><path d="M1.867 12.324a.75.75 0 0 1 1.035-.232l8.964 5.685a.25.25 0 0 0 .268 0l8.964-5.685a.75.75 0 0 1 .804 1.267l-8.965 5.685a1.75 1.75 0 0 1-1.874 0l-8.965-5.685a.75.75 0 0 1-.231-1.035"/><path d="M1.867 16.324a.75.75 0 0 1 1.035-.232l8.964 5.685a.25.25 0 0 0 .268 0l8.964-5.685a.75.75 0 0 1 .804 1.267l-8.965 5.685a1.75 1.75 0 0 1-1.874 0l-8.965-5.685a.75.75 0 0 1-.231-1.035"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            IOTstack
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ESPHome
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/SensorsIot/IOTstack" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    SensorsIot/IOTstack
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Basic_setup/" class="md-tabs__link">
          
  
  Basic setup

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../AdGuardHome/" class="md-tabs__link">
          
  
  Containers

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Developers/" class="md-tabs__link">
          
  
  Developers

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Updates/" class="md-tabs__link">
          
  
  Updates

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="IOTstack" class="md-nav__button md-logo" aria-label="IOTstack" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.063 1.456a1.75 1.75 0 0 1 1.874 0l8.383 5.316a1.75 1.75 0 0 1 0 2.956l-8.383 5.316a1.75 1.75 0 0 1-1.874 0L2.68 9.728a1.75 1.75 0 0 1 0-2.956Zm1.071 1.267a.25.25 0 0 0-.268 0L3.483 8.039a.25.25 0 0 0 0 .422l8.383 5.316a.25.25 0 0 0 .268 0l8.383-5.316a.25.25 0 0 0 0-.422Z"/><path d="M1.867 12.324a.75.75 0 0 1 1.035-.232l8.964 5.685a.25.25 0 0 0 .268 0l8.964-5.685a.75.75 0 0 1 .804 1.267l-8.965 5.685a1.75 1.75 0 0 1-1.874 0l-8.965-5.685a.75.75 0 0 1-.231-1.035"/><path d="M1.867 16.324a.75.75 0 0 1 1.035-.232l8.964 5.685a.25.25 0 0 0 .268 0l8.964-5.685a.75.75 0 0 1 .804 1.267l-8.965 5.685a1.75 1.75 0 0 1-1.874 0l-8.965-5.685a.75.75 0 0 1-.231-1.035"/></svg>

    </a>
    IOTstack
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/SensorsIot/IOTstack" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    SensorsIot/IOTstack
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Basic setup
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Basic setup
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Basic_setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Basic_setup/Accessing-your-Device-from-the-internet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Accessing your device from the internet
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Basic_setup/Backup-and-Restore/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Backing up and restoring IOTstack
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Basic_setup/Custom/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Custom overrides
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Basic_setup/Default-Configs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Default ports
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Basic_setup/Docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Basic_setup/Menu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Menu
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Basic_setup/Networking/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Networking
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Basic_setup/Troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Troubleshooting
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Basic_setup/Understanding-Containers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    What is Docker?
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Basic_setup/What-is-sudo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    What is sudo?
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Containers
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Containers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AdGuardHome/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AdGuard Home
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Adminer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Adminer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Blynk_server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Blynk server
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chronograf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chronograf
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DashMachine/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DashMachine
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Deconz/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    deCONZ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DiyHue/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DIY hue
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Domoticz/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Domoticz
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Dozzle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dozzle
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Duckdns/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Duck DNS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    ESPHome
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    ESPHome
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#resources" class="md-nav__link">
    <span class="md-ellipsis">
      Resources
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#serviceDefinition" class="md-nav__link">
    <span class="md-ellipsis">
      IOTstack service definition
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#container-installation" class="md-nav__link">
    <span class="md-ellipsis">
      Container installation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Container installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#via-the-iotstack-menu" class="md-nav__link">
    <span class="md-ellipsis">
      via the IOTstack menu
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manualInstall" class="md-nav__link">
    <span class="md-ellipsis">
      manual installation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-quick-tour" class="md-nav__link">
    <span class="md-ellipsis">
      A quick tour
    </span>
  </a>
  
    <nav class="md-nav" aria-label="A quick tour">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#start-the-container" class="md-nav__link">
    <span class="md-ellipsis">
      start the container
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connect-your-esp-device" class="md-nav__link">
    <span class="md-ellipsis">
      connect your ESP device
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#in-your-browser" class="md-nav__link">
    <span class="md-ellipsis">
      in your browser
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-a-clean-slate" class="md-nav__link">
    <span class="md-ellipsis">
      Getting a clean slate
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#device-mapping" class="md-nav__link">
    <span class="md-ellipsis">
      Device mapping
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Device mapping">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#udevRules" class="md-nav__link">
    <span class="md-ellipsis">
      UDEV rules file
    </span>
  </a>
  
    <nav class="md-nav" aria-label="UDEV rules file">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#udevRulesRemoval" class="md-nav__link">
    <span class="md-ellipsis">
      Removing the rules file
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#privileged" class="md-nav__link">
    <span class="md-ellipsis">
      Privileged mode
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#routine-maintenance" class="md-nav__link">
    <span class="md-ellipsis">
      Routine maintenance
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../EspruinoHub/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Espruinohub
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Grafana/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Grafana
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Heimdall/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Heimdall
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Home-Assistant/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home Assistant
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Homebridge/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Homebridge
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Homer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Homer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../InfluxDB/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    InfluxDB
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../InfluxDB2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    InfluxDB 2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Kapacitor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kapacitor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../MJPEG-Streamer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Motion JPEG Streamer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../MariaDB/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MariaDB
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Mosquitto/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mosquitto
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../MotionEye/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MotionEye
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../NextCloud/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Nextcloud
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Node-RED/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Node-RED
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Octoprint/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Octoprint
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenHab/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    openHAB
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PgAdmin4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pgAdmin4
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Pi-hole/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pi-hole
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Plex/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plex
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Portainer-agent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Portainer agent
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Portainer-ce/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Portainer CE
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PostgreSQL/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PostgreSQL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Prometheus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Prometheus
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../RTL_433-docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RTL_433 Docker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Ring-MQTT/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ring-MQTT
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Scrypted/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scrypted
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Syncthing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Syncthing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../TasmoAdmin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TasmoAdmin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Telegraf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Telegraf
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Timescaledb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Timescaledb
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../WireGuard/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WireGuard
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../WordPress/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WordPress
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../X2go/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    x2go
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ZeroTier-vs-WireGuard/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ZeroTier vs WireGuard
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ZeroTier/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ZeroTier
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Zigbee2MQTT/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Zigbee2MQTT
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Zigbee2mqttassistant/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Zigbee2Mqtt Assistant
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Developers
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Developers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Developers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Developers/BuildStack-RandomPassword/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Build Stack Random Services Password
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Developers/BuildStack-Services/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Build Stack Services system
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Developers/Git-Setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Git Setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Developers/Menu-System/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Menu system
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Developers/PostBuild-Script/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Postbuild BASH Script
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Updates
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Updates
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Updates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Updating the project
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Updates/Changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Updates/New-Menu-Release-Notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    New IOTstack Menu
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Updates/gcgarner-migration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migrating from gcgarner to SensorsIot
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Updates/migration-network-change/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migration: network change
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#resources" class="md-nav__link">
    <span class="md-ellipsis">
      Resources
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#serviceDefinition" class="md-nav__link">
    <span class="md-ellipsis">
      IOTstack service definition
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#container-installation" class="md-nav__link">
    <span class="md-ellipsis">
      Container installation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Container installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#via-the-iotstack-menu" class="md-nav__link">
    <span class="md-ellipsis">
      via the IOTstack menu
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manualInstall" class="md-nav__link">
    <span class="md-ellipsis">
      manual installation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-quick-tour" class="md-nav__link">
    <span class="md-ellipsis">
      A quick tour
    </span>
  </a>
  
    <nav class="md-nav" aria-label="A quick tour">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#start-the-container" class="md-nav__link">
    <span class="md-ellipsis">
      start the container
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connect-your-esp-device" class="md-nav__link">
    <span class="md-ellipsis">
      connect your ESP device
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#in-your-browser" class="md-nav__link">
    <span class="md-ellipsis">
      in your browser
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-a-clean-slate" class="md-nav__link">
    <span class="md-ellipsis">
      Getting a clean slate
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#device-mapping" class="md-nav__link">
    <span class="md-ellipsis">
      Device mapping
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Device mapping">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#udevRules" class="md-nav__link">
    <span class="md-ellipsis">
      UDEV rules file
    </span>
  </a>
  
    <nav class="md-nav" aria-label="UDEV rules file">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#udevRulesRemoval" class="md-nav__link">
    <span class="md-ellipsis">
      Removing the rules file
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#privileged" class="md-nav__link">
    <span class="md-ellipsis">
      Privileged mode
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#routine-maintenance" class="md-nav__link">
    <span class="md-ellipsis">
      Routine maintenance
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="esphome">ESPHome<a class="headerlink" href="#esphome" title="Permanent link">&para;</a></h1>
<p><em>ESPHome is a system to control your microcontrollers by simple yet powerful configuration files and control them remotely through Home Automation systems.</em></p>
<h2 id="resources">Resources<a class="headerlink" href="#resources" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://esphome.io">ESPHome documentation</a></li>
<li><a href="https://hub.docker.com/r/esphome/esphome">DockerHub</a></li>
<li><a href="https://github.com/esphome/feature-requests">GitHub</a></li>
</ul>
<h2 id="serviceDefinition">IOTstack service definition<a class="headerlink" href="#serviceDefinition" title="Permanent link">&para;</a></h2>
<div class="language-yaml highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">esphome</span><span class="p">:</span>
<span class="w">  </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">esphome</span>
<span class="w">  </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">esphome/esphome</span>
<span class="w">  </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unless-stopped</span>
<span class="w">  </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TZ=${TZ:-Etc/UTC}</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">USERNAME=${ESPHOME_USERNAME:-esphome}</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PASSWORD=${ESPHOME_PASSWORD:?eg echo ESPHOME_PASSWORD=ChangeMe &gt;&gt;~/IOTstack/.env}</span>
<span class="w">  </span><span class="nt">network_mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">host</span>
<span class="w">  </span><span class="nt">x-ports</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;6052:6052&quot;</span>
<span class="w">  </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./volumes/esphome/config:/config</span>
<span class="w">  </span><span class="nt">device_cgroup_rules</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;c</span><span class="nv"> </span><span class="s">188:*</span><span class="nv"> </span><span class="s">rw&#39;</span>
</code></pre></div></td></tr></table></div>
<p>Notes:</p>
<ol>
<li>The container runs in "host" mode, meaning it binds to the host port 6052.</li>
<li>The <code>x-</code> prefix on the <code>x-ports</code> clause has the same effect as commenting-out lines 10 and 11. It serves the twin purposes of documenting the fact that the ESPHome container uses port 6052 and minimising the risk of port number collisions.</li>
</ol>
<h2 id="container-installation">Container installation<a class="headerlink" href="#container-installation" title="Permanent link">&para;</a></h2>
<h3 id="via-the-iotstack-menu">via the IOTstack menu<a class="headerlink" href="#via-the-iotstack-menu" title="Permanent link">&para;</a></h3>
<p>If you select ESPHome in the IOTstack menu, as well as adding the <a href="#serviceDefinition">service definition</a> to your compose file, the menu:</p>
<ol>
<li>Copies a rules file into <code>/etc/udev/rules.d</code>.</li>
<li>Checks <code>~/IOTstack/.env</code> for the presence of the <code>ESPHOME_USERNAME</code> and initialises it to the value <code>esphome</code> if it is not found.</li>
<li>Checks <code>~/IOTstack/.env</code> for the presence of the <code>ESPHOME_PASSWORD</code> and initialises it to a random value if it is not found.</li>
</ol>
<h3 id="manualInstall">manual installation<a class="headerlink" href="#manualInstall" title="Permanent link">&para;</a></h3>
<p>If you prefer to avoid the menu, you can install ESPHome like this:</p>
<ol>
<li>
<p>Be in the correct directory:</p>
<div class="language-console highlight"><pre><span></span><code><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>~/IOTstack
</code></pre></div>
</li>
<li>
<p>If you are on the "master" branch, add the service definition like this:</p>
<div class="language-console highlight"><pre><span></span><code><span class="gp">$ </span>sed<span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;s/^/  /&quot;</span><span class="w"> </span>./.templates/esphome/service.yml<span class="w"> </span>&gt;&gt;docker-compose.yml
</code></pre></div>
<p>Alternatively, if you are on the "old-menu" branch, do this:</p>
<div class="language-console highlight"><pre><span></span><code><span class="gp">$ </span>cat<span class="w"> </span>./.templates/esphome/service.yml<span class="w"> </span>&gt;&gt;docker-compose.yml
</code></pre></div>
</li>
<li>
<p>Replace <code>username</code> and <code>password</code> in the following commands with values of your choice and then run the commands:</p>
<div class="language-console highlight"><pre><span></span><code><span class="gp">$ </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;ESPHOME_USERNAME=username &gt;&gt;.env</span>
<span class="gp">$ </span><span class="s2">echo &quot;</span><span class="nv">ESPHOME_PASSWORD</span><span class="o">=</span>password<span class="s2">&quot; &gt;&gt;.env</span>
</code></pre></div>
<p>This initialises the required environment variables. Although the username defaults to <code>esphome</code>, there is no default for the password. If you forget to set a password, <code>docker-compose</code> will remind you when you try to start the container:</p>
<div class="language-text highlight"><pre><span></span><code>error while interpolating services.esphome.environment.[]: \
  required variable ESPHOME_PASSWORD is missing a value: \
  eg echo ESPHOME_PASSWORD=ChangeMe &gt;&gt;~/IOTstack/.env
</code></pre></div>
<p>The values of the username and password variables are applied each time you start the container. In other words, if you decide to change these credentials, all you need to do is edit the <code>.env</code> file and up the container.</p>
</li>
<li>
<p>Copy the UDEV rules file into place and ensure it has the correct permissions:</p>
<div class="language-console highlight"><pre><span></span><code><span class="gp">$ </span>sudo<span class="w"> </span>cp<span class="w"> </span>./.templates/esphome/88-tty-iotstack-esphome.rules<span class="w"> </span>/etc/udev/rules.d/
<span class="gp">$ </span>sudo<span class="w"> </span>chmod<span class="w"> </span><span class="m">644</span><span class="w"> </span>/etc/udev/rules.d/88-tty-iotstack-esphome.rules
</code></pre></div>
</li>
</ol>
<h2 id="a-quick-tour">A quick tour<a class="headerlink" href="#a-quick-tour" title="Permanent link">&para;</a></h2>
<p>ESPHome provides a number of methods for provisioning an ESP device. These instructions focus on the situation where the device is connected to your Raspberry&nbsp;Pi via a USB cable.</p>
<h3 id="start-the-container">start the container<a class="headerlink" href="#start-the-container" title="Permanent link">&para;</a></h3>
<p>To start the container:</p>
<div class="language-console highlight"><pre><span></span><code><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>~/IOTstack
<span class="gp">$ </span>docker-compose<span class="w"> </span>up<span class="w"> </span>-d<span class="w"> </span>esphome
</code></pre></div>
<p>Tip:</p>
<ul>
<li>
<p>You can always retrieve your ESPHome login credentials from the <code>.env</code> file. For example:</p>
<div class="language-console highlight"><pre><span></span><code><span class="gp">$ </span>grep<span class="w"> </span>^ESPHOME_<span class="w"> </span>.env
<span class="go">ESPHOME_USERNAME=esphome</span>
<span class="go">ESPHOME_PASSWORD=8AxXG5ZVsO4UGTMt</span>
</code></pre></div>
</li>
</ul>
<h3 id="connect-your-esp-device">connect your ESP device<a class="headerlink" href="#connect-your-esp-device" title="Permanent link">&para;</a></h3>
<p>Connect your ESP device to one of your Raspberry&nbsp;Pis USB ports. You need to connect the device <em>while</em> the ESPHome container is running so that the <a href="#udevRules">UDEV rules file</a> can propagate the device (typically <code>/dev/ttyUSBn</code>) into the container.</p>
<p>So long as the container is running, you can freely connect and disconnect ESP devices to your Raspberry&nbsp;Pis USB ports, and the container will keep in sync.</p>
<h3 id="in-your-browser">in your browser<a class="headerlink" href="#in-your-browser" title="Permanent link">&para;</a></h3>
<p>Launch your browser. For maximum flexibility, ESPHome recommends browsers that support <em>WebSerial</em>, like Google Chrome or Microsoft Edge.</p>
<ol>
<li>
<p>Connect to your Raspberry&nbsp;Pi on port 6052 (reference point <!--A-->&#x1F130; in the following screen shot):</p>
<p><img alt="main login screen" src="../images/esphome-010-login.png" /></p>
<p>You can use your Raspberry&nbsp;Pis:</p>
<ul>
<li>multicast domain name (eg <code>raspberrypi.local</code>);</li>
<li>IP address (eg 192.168.1.100); or</li>
<li>domain name (if you run your own Domain Name System server).</li>
</ul>
</li>
<li>
<p>Enter your ESPHome credentials at <!--B-->&#x1F131; and click <kbd>Login</kbd>.</p>
</li>
<li>
<p>Click either of the <kbd>+ New Device</kbd> buttons <!--C-->&#x1F132;:</p>
<p><img alt="add new device" src="../images/esphome-020-new-device.png" /></p>
<p>Read the dialog and then click <kbd>Continue</kbd> <!--D-->&#x1F133;:</p>
<p><img alt="new device dialog" src="../images/esphome-030-new-device-continue.png" /></p>
</li>
<li>
<p>Give the configuration a name at <!--E-->&#x1F134;:</p>
<p><img alt="create configuration dialog" src="../images/esphome-040-create-config.png" /></p>
<p>In the fields at <!--F-->&#x1F135;, enter the Network Name (SSID) and password (PSK) of the WiFi network that you want your ESP devices to connect to when they power up.</p>
<blockquote>
<p>The WiFi fields are only displayed the very first time you set up a device. Thereafter, ESPHome assumes all your devices will use the same WiFi network.</p>
</blockquote>
<p>Click Next <!--G-->&#x1F136;.</p>
</li>
<li>
<p>Select the appropriate SoC (System on a Chip) type for your device. Here, I am using a generic ESP32 at <!--H-->&#x1F137;:</p>
<p><img alt="select device type dialog" src="../images/esphome-050-device-type.png" /></p>
<p>Clicking on the appropriate line proceeds to the next step.</p>
</li>
<li>
<p>You can either make a note of the encryption key or, as is explained in the dialog, defer that until you actually need it for Home Assistant. Click Install <!--I-->&#x1F138;.</p>
<p><img alt="device encryption key" src="../images/esphome-060-encryption-key.png" /></p>
</li>
<li>
<p>The primary reason for running ESPHome as a container in IOTstack is so you can program ESP devices attached to your Raspberry&nbsp;Pi. You need to tell ESPHome what you are doing by selecting Plug into the computer running ESPHome Dashboard <!--J-->&#x1F139;:</p>
<p><img alt="choose device connection method" src="../images/esphome-070-install-method.png" /></p>
</li>
<li>
<p>If all has gone well, your device will appear in the list. Select it <!--K-->&#x1F13A;:</p>
<p><img alt="pick server USB port" src="../images/esphome-080-server-port.png" /></p>
<p>If, instead, you see the window below, it likely means you did not connect your ESP device <em>while</em> the ESPHome container was running:</p>
<p><img alt="no device detected alert" src="../images/esphome-085-no-server-port.png" /></p>
<p>Try disconnecting and reconnecting your ESP device, and waiting for the panel <!--K-->&#x1F13A; to refresh. If that does not cure the problem then it likely means the <a href="#udevRules">UDEV rules</a> are not matching on your particular device for some reason. You may need to consider <a href="#privileged">privileged mode</a>.</p>
</li>
<li>
<p>The container will begin the process of compiling the firmware and uploading it to your device. The first time you do this takes significantly longer than second-or-subsequent builds, mainly because the container downloads almost 2GB of data.</p>
<p><img alt="build process log window" src="../images/esphome-090-build-sequence.png" /></p>
<p>The time to compile depends on the speed of your Raspberry&nbsp;Pi hardware (ie a Raspberry&nbsp;Pi 5 will be significantly faster than a model 4, than a model 3). Be patient!</p>
<p>When the progress log <!--L-->&#x1F13B; implies the process has been completed, you can click <kbd>Stop</kbd> <!--M-->&#x1F13C; to dismiss the window.</p>
</li>
<li>
<p>Assuming normal completion, your ESP device should show as Online <!--N-->&#x1F13D;. You can edit or explore the configuration using the Edit and &#x22EE; buttons.</p>
<p><img alt="job done, device online" src="../images/esphome-100-device-online.png" /></p>
</li>
</ol>
<h2 id="getting-a-clean-slate">Getting a clean slate<a class="headerlink" href="#getting-a-clean-slate" title="Permanent link">&para;</a></h2>
<p>If ESPHome misbehaves or your early experiments leave a lot of clutter behind, and you decide it would be best to start over with a clean installation, run the commands below:</p>
<div class="language-console highlight"><pre><span></span><code><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>~/IOTstack
<span class="gp">$ </span>docker-compose<span class="w"> </span>down<span class="w"> </span>esphome
<span class="gp">$ </span>sudo<span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>./volumes/esphome
<span class="gp">$ </span>docker-compose<span class="w"> </span>up<span class="w"> </span>-d<span class="w"> </span>esphome
</code></pre></div>
<p>Notes:</p>
<ol>
<li>Always be careful with <code>sudo rm</code>. Double-check the command <strong>before</strong> you press <kbd>enter</kbd>.</li>
<li>
<p>The <code>sudo rm</code> may seem to take longer than you expect. Do not be concerned. ESPHome downloads a lot of data which it stores at the hidden path:</p>
<div class="language-text highlight"><pre><span></span><code>/IOTstack/volumes/esphome/config/.esphome
</code></pre></div>
<p>A base install has more than 13,000 files and over 3,000 directories. Even on a solid state disk, deleting that meny directory entries takes time!</p>
</li>
</ol>
<h2 id="device-mapping">Device mapping<a class="headerlink" href="#device-mapping" title="Permanent link">&para;</a></h2>
<h3 id="udevRules">UDEV rules file<a class="headerlink" href="#udevRules" title="Permanent link">&para;</a></h3>
<p>The <a href="#serviceDefinition">service definition</a> contains the following lines:</p>
<div class="language-yaml highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span><span class="nt">device_cgroup_rules</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;c</span><span class="nv"> </span><span class="s">188:*</span><span class="nv"> </span><span class="s">rw&#39;</span>
</code></pre></div></td></tr></table></div>
<p>Those lines assume the presence of a rules file at:</p>
<div class="language-text highlight"><pre><span></span><code>/etc/udev/rules.d/88-tty-iotstack-esphome.rules
</code></pre></div>
<p>That file is copied into place automatically if you use the IOTstack menu to select ESPHome. It should also have been copied if you <a href="#manualInstall">installed ESPHome manually</a>.</p>
<p>What the rules file does is to wait for you to connect any USB device which maps to a major device number of 188. That includes most (hopefully all) USB-to-serial adapters that are found on ESP dev boards, or equivalent standalone adapters such as those made by Future Technology Devices International (FTDI) and Silicon Laboratories Incorporated where you typically connect jumper wires to the GPIO pins which implement the ESP's primary serial interface.</p>
<p>Whenever you <strong>connect</strong> such a device to your Raspberry&nbsp;Pi, the rules file instructs the ESPHome container to add a matching node. Similarly, when you <strong>remove</strong> such a device, the rules file instructs the ESPHome container to delete the matching node. The <strong>container</strong> gains the ability to access the USB device (the ESP) via the <code>device_cgroup_rules</code> clause.</p>
<p>You can check whether a USB device is known to the container by running:</p>
<div class="language-console highlight"><pre><span></span><code><span class="gp">$ </span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>esphome<span class="w"> </span>ls<span class="w"> </span>/dev
</code></pre></div>
<p>The mechanism is not 100% robust. In particular, it will lose synchronisation if the system is rebooted, or the container is started when a USB device is already mounted. Worst case should be the need to unplug then re-plug the device, after which the container should catch up.</p>
<h4 id="udevRulesRemoval">Removing the rules file<a class="headerlink" href="#udevRulesRemoval" title="Permanent link">&para;</a></h4>
<p>The UDEV rules "fire" irrespective of whether or not the ESPHome container is actually running. All that happens if the container is not running is an error message in the system log. However, if you decide to remove the ESPHome container, you should remove the rules file by hand:</p>
<div class="language-console highlight"><pre><span></span><code><span class="gp">$ </span>sudo<span class="w"> </span>rm<span class="w"> </span>/etc/udev/rules.d/88-tty-iotstack-esphome.rules
</code></pre></div>
<h3 id="privileged">Privileged mode<a class="headerlink" href="#privileged" title="Permanent link">&para;</a></h3>
<p>The <a href="#udevRules">UDEV rules approach</a> uses the principle of least privilege but it relies upon an assumption about how ESP devices represent themselves when connected to a Raspberry&nbsp;Pi.</p>
<p>If you encounter difficulties, you can consider trying this instead:</p>
<ol>
<li>Follow the instructions to <a href="#udevRulesRemoval">remove the UDEV rules file</a>.</li>
<li>
<p>Edit the <a href="#serviceDefinition">service definition</a> so that it looks like this:</p>
<div class="language-yaml highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span><span class="nt">x-device_cgroup_rules</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;c</span><span class="nv"> </span><span class="s">188:*</span><span class="nv"> </span><span class="s">rw&#39;</span>
<span class="w">  </span><span class="nt">privileged</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div></td></tr></table></div>
<p>The <code>x-</code> prefix has the effect of commenting-out lines 14 and 15, making it easy to restore them later.</p>
</li>
<li>
<p>Start the container:</p>
<div class="language-console highlight"><pre><span></span><code><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>~/IOTstack
<span class="gp">$ </span>docker-compose<span class="w"> </span>up<span class="w"> </span>-d<span class="w"> </span>esphome
</code></pre></div>
</li>
</ol>
<p>The <code>privileged</code> flag gives the container unrestricted access to <strong>all</strong> of <code>/dev</code>. The container runs as root so this is the same as granting any process running inside the ESPHome container full and unrestricted access to <strong>all</strong> corners of your hardware platform, including your mass storage devices (SD, HD, SSD). You should use privileged mode <em>sparingly</em> and in full knowledge that it is entirely at your own risk! </p>
<h2 id="routine-maintenance">Routine maintenance<a class="headerlink" href="#routine-maintenance" title="Permanent link">&para;</a></h2>
<p>You can keep ESPHome up-to-date with routine pull commands:</p>
<div class="language-console highlight"><pre><span></span><code><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>~/IOTstack
<span class="gp">$ </span>docker-compose<span class="w"> </span>pull
<span class="gp">$ </span>docker-compose<span class="w"> </span>up<span class="w"> </span>-d
<span class="gp">$ </span>docker<span class="w"> </span>system<span class="w"> </span>prune<span class="w"> </span>-f
</code></pre></div>
<p>If a <code>pull</code> downloads a more-recent image for ESPHome, the subsequent <code>up</code> will (logically) disconnect any connected ESP device from the container.</p>
<p>The same will happen if you down and up the ESPHome container, or reboot the Raspberry&nbsp;Pi, while an ESP device is physically connected to the Raspberry&nbsp;Pi.</p>
<blockquote>
<p>In every case, the device will still be known to the Raspberry&nbsp;Pi, just not the ESPHome container. In a logical sense, the container is out of sync with the host system.</p>
</blockquote>
<p>If this happens, disconnect and reconnect the device. The <a href="#udevRules">UDEV rule</a> will fire and propagate the device back into the running container.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.annotate", "tabs", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
        <script src="../../javascript/fix-codeblock-console-copy-button.js"></script>
      
    
  </body>
</html>